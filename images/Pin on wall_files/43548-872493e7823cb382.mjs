(self.modernJsonp=self.modernJsonp||[]).push([["43548"],{629769(e,t,i){var a,s,n,r;i.r(t),i.d(t,{default:()=>o});let l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:s=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheckQuery_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:s,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},r],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c881f56582aebd78b7f3f625abfe959aa6d034bcd97439d6b4224d46c1c5f8cc",metadata:{},name:"AlreadyPinnedCheckQuery",operationKind:"query",text:null}};l.hash="0b5f077c08e31de36594b6918e128d12";let o=l},737817(e,t,i){i.r(t),i.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};a.hash="6bb1a587f71f85424aa51845831862d4";let s=a},891023(e,t,i){i.r(t),i.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheck_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};a.hash="3caf9424c2af74d2b11a6ea682b57d1b";let s=a},827842(e,t,i){i.r(t),i.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_pin",selections:[{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],type:"Pin",abstractKey:null};a.hash="c26037c886bf0e64c6b73d7daa56a9b4";let s=a},581943(e,t,i){i.r(t),i.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};a.hash="f12c153dafdb70970e02775ea0db67c2";let s=a},376901(e,t,i){i.r(t),i.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPicker_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};a.hash="76215b7b40cb02e76b77e58c8765d0d1";let s=a},399342(e,t,i){i.r(t),i.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardsPane_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPicker_pin"}],type:"Pin",abstractKey:null};a.hash="56f620fbd63abf8f7cb32f9a378198f8";let s=a},233746(e,t,i){i.r(t),i.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_pin",selections:[{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheck_pin"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null}]}],type:"Pin",abstractKey:null};a.hash="ee852d86e422f64afda32d5c5ed05eeb";let s=a},978663(e,t,i){i.r(t),i.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};a.hash="1a4583782792fbfe92015cb2dbe50f70";let s=a},82118(e,t,i){var a;i.r(t),i.d(t,{default:()=>n});let s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_pin",selections:[{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null}]}],type:"Pin",abstractKey:null};s.hash="64132b88edd48497e63c9ad85ae5ab66";let n=s},842227(e,t,i){i.r(t),i.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"ShuffleAsset",abstractKey:null};a.hash="58c24e25a76e7a1c4533f3b07f490517";let s=a},414227(e,t,i){i.r(t),i.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_pin",selections:[{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"PinPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardsPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_pin"}],type:"Pin",abstractKey:null};a.hash="dab58396c0cc99aa60f3fd6bc5d0ebe5";let s=a},433282(e,t,i){i.r(t),i.d(t,{default:()=>s});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_shuffle_asset",selections:[{args:null,kind:"FragmentSpread",name:"PinPane_shuffle_asset"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};a.hash="4435ca5e135b834ea8a6425f68eb2f7a";let s=a},225886(e,t,i){i.d(t,{A:()=>h});var a=i(61163),s=i(859471),n=i(19821),r=i(538329),l=i(985761),o=i(562615);function d(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends s.Component{constructor(...e){super(...e),d(this,"setInputRef",e=>{e&&(this._input=e)}),d(this,"handleKeyDown",e=>{let{event:t}=e,{disabled:i,indexManager:a}=this.props;if(!i)switch(t.which){case l.A.ENTER:case l.A.NUMPAD_ENTER:t.preventDefault(),a.select();break;case l.A.UP:t.preventDefault(),a.prev();break;case l.A.DOWN:t.preventDefault(),a.next()}})}componentDidMount(){(0,a.A)("PickerSearchField","/app/www/RepinPicker/PickerSearchField/PickerSearchField.tsx"),this._input&&this._input.focus()}render(){let{onChange:e,value:t}=this.props;return(0,o.jsx)(n.az,{"data-test-id":"picker-search-field-container",role:"presentation",width:"100%",children:(0,o.jsx)(n.Lw,{ref:this.setInputRef,accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:"lg",value:t})})}}let h=function(e){let t=(0,r.A)();return(0,o.jsx)(c,{...e,i18n:t})}},949141(e,t,i){i.d(t,{A:()=>_});var a=i(61163),s=i(859471),n=i(19821),r=i(538329),l=i(386121),o=i(732857),d=i(225886),c=i(290720),h=i(848561),u=i(746508),p=i(562615);function m(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends s.Component{constructor(...e){super(...e),m(this,"state",{searchQuery:""}),m(this,"handleSelectItem",e=>{let{onCreate:t,onSelected:i}=this.props;if(!e&&t){let{searchQuery:e}=this.state;t(e)}else e&&i(e);(t||e)&&this.setState({searchQuery:""})}),m(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),m(this,"renderSectionHeader",e=>{let{isRepin:t}=this.props;return e.title?(0,p.jsx)(n.az,{children:(0,p.jsx)(n.az,{paddingX:3,paddingY:1,children:(0,p.jsx)(n._Y,{accessibilityLevel:t?2:4,children:(0,p.jsx)(n.KJ,{size:"200",children:e.title})})})}):null}),m(this,"renderRow",({item:e,hovered:t,sectionProps:i={}})=>{let{boardSavedTo:a,isSelectMode:s,disabledRowId:n}=this.props,{searchQuery:r}=this.state,{inSectionSelection:l=!1}=i,o=a&&a.board===e.id?a&&a.state:null,d="board_section"===e.type;return(0,p.jsx)(c.A,{disabled:e.id===n&&l,isSection:d,isSelectMode:s,isWithinSectionPicker:l,item:e,saveState:o,searchQuery:r,selected:t})})}render(){let{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:i,getSections:a,isLoaded:s,onCreate:r,pinId:c}=this.props;if(!s)return(0,p.jsx)(n.az,{paddingY:5,children:(0,p.jsx)(n.y$,{accessibilityLabel:this.props.i18n._('loading section picker', 'accessibility label for the loading spinner the repin picker', 'accessibility label for the loading spinner the repin picker'),show:!0})});{let{searchQuery:s}=this.state,m=a(s);return this.indexManager=new l.A(m.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),(0,p.jsxs)(n.az,{dangerouslySetInlineStyle:{__style:{zIndex:0}},direction:"column",display:"flex",flex:"grow",height:"100%",minHeight:0,overflow:"auto",children:[!i&&(0,p.jsx)(n.az,{children:(0,p.jsx)(n.az,{marginBottom:4,marginTop:1,paddingX:3,children:(0,p.jsx)(d.A,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:s})})}),(0,p.jsx)(o.A,{disabled:!!e,grow:!i&&!s,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:m}),r&&(0,p.jsx)(n.az,{elevation:m.length>1?"shadowFloating":void 0,children:(0,p.jsx)(u.A,{buttonLabel:t,hasHoverState:!0,name:s,onClick:()=>r(s)})}),i&&r&&c&&(0,p.jsx)(h.A,{onBoardSelected:r,pinId:c})]})}}componentDidMount(){(0,a.A)("RepinPicker","/app/www/RepinPicker/RepinPicker.tsx")}}function _(e){(0,s.useEffect)(()=>{(0,a.A)("RepinPicker","/app/www/RepinPicker/RepinPicker.tsx")},[]);let t=(0,r.A)();return(0,p.jsx)(g,{...e,i18n:t})}},386121(e,t,i){i.d(t,{A:()=>r});let a={row:0,section:0},s={row:-1,section:-1},n=()=>void 0;class r{constructor(e){this.index={...a},this.sections=e,this.updateCallback=n,this.selectItem=n}getIndex(){return this.index}isAtStart(){let{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){let{row:e,section:t}=this.index,i=this.sections[t]||[];return this.sections.length===t+1&&i.length===e+1}next(){if(this.isAtEnd())return;let{row:e,section:t}=this.index;e===s.row&&t===s.section?this.index={...a}:this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;let{row:e,section:t}=this.index;if(e===s.row&&t===s.section)this.index={...a};else if(e>0)this.index.row-=1;else{let e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){let{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index={...s},this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},732857(e,t,i){i.d(t,{A:()=>d});var a=i(61163),s=i(859471),n=i(19821),r=i(871023),l=i(562615);function o(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends s.Component{constructor(e){super(e),o(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),o(this,"handleIndexUpdate",e=>{let{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),o(this,"handleSelectItem",e=>()=>{let{disabled:t,onSelectItem:i}=this.props;t||i(e)}),o(this,"handleMouseEnter",e=>()=>{let{disabled:t,indexManager:i}=this.props;t||i.updateIndex(e)}),o(this,"handleMouseLeave",()=>{let{disabled:e,indexManager:t}=this.props;e||t.setInactive()}),o(this,"renderItems",(e,t)=>{let{renderItem:i}=this.props,{selectedIndex:a}=this.state,{row:s,section:r}=a||{},{customProps:o={},items:d,renderItem:c}=e,{isDisabled:h}=o,u=t===r,p=c||i;return p&&d.map((e,i)=>{let a=h?.(e)??!1,r=u&&i===s;return(0,l.jsx)(n.az,{ref:!a&&r?this.setSelectedItemRef:null,"data-test-id":"board-selection",children:a?p({item:e,hovered:r,sectionProps:o}):(0,l.jsx)(n.Rp,{fullWidth:!1,onMouseEnter:this.handleMouseEnter({section:t,row:i}),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:200,children:p({item:e,hovered:r,sectionProps:o})})},i)})}),o(this,"renderSections",()=>{let{renderSectionHeader:e,sections:t}=this.props;return t.map((t,i)=>(0,l.jsxs)(n.az,{children:[e&&e(t,i),this.renderItems(t,i)]},i))});let{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){let{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){let e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;let i=e.getBoundingClientRect(),a=i.top,s=i.bottom,n=t.getBoundingClientRect(),r=n.top;s>=n.bottom?e.scrollIntoView(!1):a<=r&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){let{grow:e=!1,maxHeight:t,fetchMore:i}=this.props;return(0,l.jsx)(r.A,{fetchMore:i,children:({setRef:i,onScroll:a})=>(0,l.jsx)(n.az,{ref:e=>{this.containerRef=e,i(e)},flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:a,overflow:"auto",children:this.renderSections()})})}componentDidMount(){(0,a.A)("SectionList","/app/www/common/SectionList/SectionList.tsx")}}},916455(e,t,i){i.d(t,{A:()=>x});var a,s,n=i(61163),r=i(859471);i(825193);var l=i(19821),o=i(535273),d=i(538329),c=i(542975),h=i(562615);function u(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let p=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],m=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),g=e=>Math.PI/180*e;class _ extends r.PureComponent{constructor(...e){super(...e),u(this,"animationTimer",null),u(this,"canvasRemovalTimer",null),u(this,"containerRef",(0,r.createRef)()),u(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;let{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),i=2.5*e,a=document.createElement("canvas");return a.style.position="absolute",a.style.left=`${0-(i-t)/2}px`,a.style.top=`${0-(i-e)/2}px`,a.style.pointerEvents="none",a.style.width=`${i}px`,a.style.height=`${i}px`,a.style.overflow="visible",a.width=i,a.height=i,a}),u(this,"explode",()=>{let e=this.buildCanvas(),t=this.containerRef.current;if(!e||!t)return;let i=e.getContext("2d");t.prepend(e);let a=Array.from(Array(120)).map(()=>({x:e.width/2,y:e.height/2,radius:Math.round(m(10,30)),color:p[Math.floor(Math.random()*p.length)],degree:Number(m(0,360).toFixed(1)),speed:Math.round(m(0,25)),friction:.9,opacity:Number(m(0,.5).toFixed(1)),yVel:0,gravity:.04})),s=(e,t,i,a)=>{window.requestAnimationFrame(()=>s(e,t,i,a)),t.clearRect(0,0,i,a),e.forEach(e=>{e.x+=e.speed*Math.cos(g(e.degree)),e.y+=e.speed*Math.sin(g(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};i&&s(a,i,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t.removeChild(e)},(this.props.delay||0)+800)})}componentDidUpdate(e){let{delay:t,startAnimation:i}=this.props,{startAnimation:a}=e;i&&a!==i&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,h.jsx)(l.az,{ref:this.containerRef,position:"relative",children:this.props.children})}}function f(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}u(_,"defaultProps",{delay:0});let b=(void 0!==a||(a=i(827842)).hash&&"c26037c886bf0e64c6b73d7daa56a9b4"!==a.hash&&console.error("The definition of 'BoardCreateSuccess_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),y=(void 0!==s||(s=i(581943)).hash&&"f12c153dafdb70970e02775ea0db67c2"!==s.hash&&console.error("The definition of 'BoardCreateSuccess_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);class v extends r.PureComponent{constructor(...e){super(...e),f(this,"state",{isInitialized:!1}),f(this,"containerRef",(0,r.createRef)()),f(this,"pinDestinationRef",(0,r.createRef)())}componentDidMount(){window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(){let{isInitialized:e}=this.state,{onDismiss:t}=this.props;e&&t&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(t,2600))}render(){let{pin:e,firstRepin:t,pinImageRef:i,selectedBoardName:a,shuffleAsset:s}=this.props,n=s?.cutoutImages??e?.images_236x,o=e?.description??"",d=n?.height??1,u=n?.width??1,p=n?.url??"",{isInitialized:m}=this.state,{mask:g,imageContainer:f}=((e,t,i,a)=>{let s,n,r={},l=i.current?.getBoundingClientRect(),o=t.current?.getBoundingClientRect(),d=a.current?.getBoundingClientRect();if(o&&l&&d){r={left:l.left-o.left,top:l.top-o.top};let e={x:d.left-l.left,y:d.top-l.top},t={x:(d.width-l.width)/2,y:(d.height-l.height)/2};s=`translate(${e.x}px, ${e.y}px)`,n=`translate(${t.x}px, ${t.y}px)`}return{mask:{position:"absolute",left:r.left,top:r.top,width:e?d?.width:l?.width,height:e?d?.height:l?.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?s:"none",transform:e?s:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:l?.width,height:l?.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?n:"none",transform:e?n:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}})(m,this.containerRef,i,this.pinDestinationRef);return(0,h.jsx)(r.Fragment,{children:(0,h.jsxs)(l.az,{ref:this.containerRef,bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:[(0,h.jsx)(l.az,{dangerouslySetInlineStyle:{__style:g},maxHeight:335,overflow:"hidden",children:(0,h.jsx)(l.az,{dangerouslySetInlineStyle:{__style:f},children:(0,h.jsx)(l._V,{alt:o,naturalHeight:d,naturalWidth:u,src:p})})}),(0,h.jsx)(l.az,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:+!!m,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1}},left:!0,position:"absolute",right:!0,top:!0,children:(0,h.jsxs)(l.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:+!!m,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}},direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[(0,h.jsx)(_,{delay:1250,startAnimation:m,children:(0,h.jsx)(l.n1,{height:180,rounding:200,width:270,children:(0,h.jsxs)(l.so,{alignItems:"stretch",height:"100%",justifyContent:"start",width:"100%",children:[(0,h.jsx)(l.az,{ref:this.pinDestinationRef,color:"transparent",flex:"grow",height:"100%",marginEnd:1}),(0,h.jsxs)(l.so,{alignItems:"stretch",direction:"column",justifyContent:"start",width:80,children:[(0,h.jsx)(l.az,{color:"secondary",flex:"grow",marginBottom:1}),(0,h.jsx)(l.az,{color:"secondary",flex:"grow"})]})]})})}),(0,h.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{opacity:+!!m,WebkitTransform:m?"translateY(0)":"translateY(20%)",transform:m?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"}},"data-test-id":"board-saved-heading",paddingX:2,children:(0,h.jsx)(l._Y,{align:"center",children:t?(0,c.vQ)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First board create confirmation message', 'First board create confirmation message'),{selectedBoardName:a??""}):(0,c.vQ)(this.props.i18n._('You saved this Pin to {{ selectedBoardName }}!', 'Board create confirmation message', 'Board create confirmation message'),{selectedBoardName:a??""})})})]})})]})})}}function x({pinKey:e,shuffleAssetKey:t,...i}){(0,r.useEffect)(()=>{(0,n.A)("BoardCreateSuccess","/app/www/nux/BoardCreateSuccess.tsx")},[]);let a=(0,d.A)(),s=(0,o.A)(b,e),l=(0,o.A)(y,t);return(0,h.jsx)(v,{...i,i18n:a,pin:s,shuffleAsset:l})}f(v,"defaultProps",{firstRepin:!1})},290720(e,t,i){i.d(t,{A:()=>h,p:()=>c});var a=i(19821),s=i(753771),n=i(538329),r=i(580740),l=i(281817),o=i(835375),d=i(562615);function c(e,t=""){let i=e&&e.length>1?RegExp(e,"i"):"";return e&&e.length>1?t.split(i).reduce((i,a)=>{if(i.length>0&&e&&e.length){let s=t.toLowerCase().indexOf(e.toLowerCase());return i.concat(t.substring(s,s+e.length),a)}return[a]},[]):t}let h=function(e){let t=(0,n.A)(),{disabled:i,item:h,isSection:u,isSelectMode:p,isWithinSectionPicker:m,saveState:g,searchQuery:_,selected:f}=e,b=u?null:h,y=u?h:null,v=y&&y.title||b&&b.name||"",x="",P=!1,S="",A=0;b&&({image_cover_url:x,is_collaborative:P,privacy:S,section_count:A=0}=b);let w=c(_,v),j=S===s.A.BoardPrivacy.SECRET,k=!i&&(f||!!g),z=!m&&"number"==typeof A&&A>0,C="number"==typeof A&&A>0?"boardWithSection":"boardWithoutSection",I=p?t._('Select', 'Board select button label', 'Board select button label'):t._('Save', 'Pin save button label', 'Pin save button label');return(0,d.jsxs)(a.az,{alignItems:"center",color:k?"secondary":"default","data-test-id":C,display:"flex",height:64,marginEnd:2,marginStart:2,marginTop:1,padding:2,rounding:300,children:[b&&(0,d.jsx)(a.az,{color:"secondary",flex:"none",height:48,marginEnd:2,overflow:"hidden",rounding:200,width:48,children:x&&(0,d.jsx)(a._V,{alt:t._('Board cover image', 'boardPickerRow.image.altText', 'alt text for a board cover image'),fit:"cover",naturalHeight:1,naturalWidth:1,src:x})}),y&&!!y.preview_pins?.length&&(0,d.jsx)(l.A,{image_url:y.preview_pins[0].image_square_url??"",naturalHeight:y.preview_pins[0].image_square_size_pixels?.height??1,naturalWidth:y.preview_pins[0].image_square_size_pixels?.width??1}),(0,d.jsxs)(a.so,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,d.jsx)(a.KJ,{color:i?"subtle":"default",lineClamp:1,size:"300",weight:"bold",children:w}),(z||!k)&&(0,d.jsxs)(a.so,{alignItems:"center",justifyContent:"start",children:[j&&(0,d.jsx)(o.A,{type:"secret"}),P&&(0,d.jsx)(r.A,{board:b,showCollaborativeIcon:P,useLegoLayout:!0}),z&&(0,d.jsx)(o.A,{type:"sections"})]}),!z&&k&&!g&&(0,d.jsx)(a.az,{alignItems:"center",color:"primary","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:400,children:(0,d.jsx)(a.KJ,{color:"inverse",overflow:"normal",size:"300",weight:"bold",children:I})}),!z&&k&&"loading"===g&&(0,d.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:(0,d.jsx)(a.y$,{accessibilityLabel:t._('Saving', 'Accessibility label for saving a pin to a board', 'Accessibility label for saving a pin to a board'),show:!0})})]})]})}},848561(e,t,i){i.d(t,{A:()=>u});var a=i(61163),s=i(859471),n=i(19821),r=i(586733),l=i(538329),o=i(430705),d=i(562615);function c(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class h extends s.Component{constructor(...e){super(...e),c(this,"state",{isHovering:!1}),c(this,"onHover",()=>{this.setState({isHovering:!0})}),c(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){let{name:e,selected:t,image:i,inFlyoutExp:a}=this.props;return a?(0,d.jsxs)(n.az,{alignItems:"center",color:this.state.isHovering?"secondary":"transparent",direction:"row",display:"flex",onMouseOut:this.offHover,onMouseOver:this.onHover,paddingX:4,paddingY:2,children:[(0,d.jsx)(n.az,{children:(0,d.jsx)(n.n1,{height:40,rounding:200,width:40,children:this.state.isHovering&&i&&i.url?(0,d.jsx)(n._V,{alt:"",color:"",fit:"cover",naturalHeight:i.height??1,naturalWidth:i.width??1,src:i.url}):(0,d.jsx)(n.az,{color:"secondary",height:40,width:40})})}),(0,d.jsx)(n.az,{padding:2,children:(0,d.jsx)(n._Y,{size:"400",children:e})})]}):(0,d.jsxs)(n.az,{alignItems:"center",color:t?"secondary":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[(0,d.jsx)(n.az,{children:(0,d.jsx)(n.In,{accessibilityLabel:"",color:t?"default":"subtle",icon:"plus"})}),(0,d.jsx)(n.az,{marginStart:3,children:(0,d.jsx)(n.KJ,{color:t?"default":"subtle",weight:"bold",children:e})})]})}componentDidMount(){(0,a.A)("BoardSuggestionListRow","/app/www/save/pin-to-board/BoardSuggestionList/BoardSuggestionListRow.tsx")}}let u=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:i,image:c,minHeight:u,onBoardSelected:p})=>{(0,s.useEffect)(()=>{(0,a.A)("BoardSuggestionList","/app/www/save/pin-to-board/BoardSuggestionList/BoardSuggestionList.tsx")},[]);let{logContextEvent:m}=(0,r.o)(),g=(0,l.A)(),[_,f]=(0,s.useState)(-1),{data:b=[],isLoaded:y}=(0,o.A)({name:"ApiResource",options:{url:`/v3/pins/${String(i)}/board_title_suggestions/`,pin_id:i}}),v=(0,s.useMemo)(()=>b&&b.length?b.map(e=>e.title):[],[b]),x=()=>{f(-1)},P=(t,i)=>{let a=_===i;return(0,d.jsx)("li",{children:(0,d.jsx)(n.Rp,{onMouseEnter:()=>{f(i)},onMouseLeave:x,onTap:()=>{p(v[i],!1),m({event_type:101,component:13025,element:23})},children:(0,d.jsx)(h,{image:c,inFlyoutExp:e,name:t,selected:a})})},i)};return y?v&&v.length?e?(0,d.jsx)(n.az,{children:(0,d.jsx)("ul",{children:v.map(P)})}):t?(0,d.jsxs)(n.az,{children:[(0,d.jsx)(n.az,{marginBottom:3,marginStart:6,marginTop:5,children:(0,d.jsx)(n.KJ,{children:g._('Suggested board names', 'text above suggested board names list', 'text above suggested board names list')})}),(0,d.jsx)("ul",{children:v.map(P)})]}):(0,d.jsxs)(n.az,{children:[(0,d.jsx)(n.az,{marginTop:2,paddingX:5,children:(0,d.jsx)(n.KJ,{children:g._('Suggested board names', ' - ', ' -- ')})}),(0,d.jsx)("ul",{children:v.map(P)})]}):null:(0,d.jsx)(n.so,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:u||"",children:(0,d.jsx)(n.y$,{accessibilityLabel:g._('Loading board suggestions', 'Accesibility label for loading board suggestions', 'Accesibility label for loading board suggestions'),show:!0})})}},746508(e,t,i){i.d(t,{A:()=>d});var a=i(61163),s=i(859471),n=i(19821),r=i(538329),l=i(524023),o=i(562615);function d(e){(0,s.useEffect)(()=>{(0,a.A)("CreateBoardButton","/app/www/save/pin-to-board/CreateBoardButton/CreateBoardButton.tsx")},[]);let t=(0,r.A)(),{buttonLabel:i,hasHoverState:d,name:c,onClick:h}=e,{isHovering:u,hoverHandlers:p}=(0,l.A)(),m=c||i||t._('Create board', ' - ', ' -- ');return(0,o.jsx)(n.Rp,{onMouseEnter:p.onMouseOver,onMouseLeave:p.onMouseLeave,onTap:h,children:(0,o.jsxs)(n.az,{alignItems:"center",color:d&&u?"secondary":"default",display:"flex",height:"100%",padding:4,width:"100%",children:[(0,o.jsx)(n.az,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},marginEnd:2,rounding:200,children:(0,o.jsx)(n.In,{accessibilityLabel:"",color:"default",icon:"plus",size:20})}),c?(0,o.jsx)(n.az,{margin:1,children:(0,o.jsxs)(n.KJ,{inline:!0,overflow:"normal",children:[" ",t._('Create: ', ' - ', ' -- ')," "]})}):null,(0,o.jsxs)(n.KJ,{align:"center",inline:!0,lineClamp:1,weight:"bold",children:[" ",m," "]})]})})}},375502(e,t,i){i.d(t,{A:()=>g});var a=i(61163),s=i(859471),n=i(19821),r=i(257300),l=i(538329),o=i(653472),d=i(542975),c=i(985761),h=i(928229),u=i(562615);function p(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class m extends s.Component{constructor(...e){super(...e),p(this,"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),p(this,"onDismiss",()=>{}),p(this,"mounted",!1),p(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),p(this,"handleKeyDown",e=>{e.keyCode===c.A.UP?this.handlePrevHashtag(e):e.keyCode===c.A.DOWN?this.handleNextHashtag(e):e.keyCode===c.A.ESCAPE?this.handleClose(e):e.keyCode===c.A.ENTER&&this.handleSubmit(e)}),p(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),p(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),p(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),p(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),p(this,"callResource",e=>{let{makeCancelablePromise:t}=this.props;t((0,r.A)({url:"/v3/search/autocomplete/",data:{q:e,show_pin_count:!0}}),"typeahead").then(e=>{if(!this.mounted)return;let{data:t}=e.resource_response;this.setState({recommendations:t.slice(0,5),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){let{recommendations:e,resourceLoaded:t,selectedIndex:i}=this.state,{anchor:a,idealDirection:s}=this.props,r=e.filter(e=>e.query),l="flyout_"+r.length;return t&&r.length>0?(0,u.jsx)(n.AM,{anchor:a,idealDirection:s||"down",onDismiss:this.onDismiss,size:"sm",children:(0,u.jsx)(n.az,{width:"100%",zIndex:new n.rk(3),children:r.length>0?r.map((e,t)=>(0,u.jsx)(n.Rp,{fullWidth:!1,onTap:()=>this.addHashtag(e.query),children:(0,u.jsxs)(n.az,{alignItems:"center",color:t===i?"secondary":"transparent",display:"flex",justifyContent:"between",padding:1,children:[(0,u.jsx)(n.az,{flex:"grow",children:(0,u.jsx)(n.KJ,{inline:!0,size:"200",weight:"bold",children:e.query})}),(0,u.jsx)(n.az,{flex:"none",children:(0,u.jsx)(n.KJ,{inline:!0,size:"100",children:(0,d.vQ)(this.props.i18n.ngettext('{{ count }} pin', '{{ count }} pins', Number(e.pin_count), 'label for n pins in hashtag flyout', 'label for n pins in hashtag flyout'),{count:(0,u.jsx)(o.A,{value:Number(e.pin_count)},"pinCount")})})})]})},e.query)):null})},l):null}}function g(e){(0,s.useEffect)(()=>{(0,a.A)("HashtagFlyout","/app/www/save/pin-to-board/PinPane/HashtagFlyout.tsx")},[]);let t=(0,l.A)(),i=(0,h.A)();return(0,u.jsx)(m,{...e,i18n:t,makeCancelablePromise:i})}},785657(e,t,i){i.d(t,{A:()=>C});var a,s,n,r,l,o=i(61163),d=i(859471);i(825193);var c=i(19821),h=i(586733),u=i(535273),p=i(239092),m=i(104088),g=i(219053),_=i(538329),f=i(542975),b=i(430705),y=i(562615);let v=(void 0!==a||(a=i(891023)).hash&&"3caf9424c2af74d2b11a6ea682b57d1b"!==a.hash&&console.error("The definition of 'AlreadyPinnedCheck_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),x=(void 0!==s||(s=i(737817)).hash&&"6bb1a587f71f85424aa51845831862d4"!==s.hash&&console.error("The definition of 'AlreadyPinnedCheckQuery_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s),P=(void 0!==n||(n=i(629769)).hash&&"0b5f077c08e31de36594b6918e128d12"!==n.hash&&console.error("The definition of 'AlreadyPinnedCheckQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function S({pinKey:e}){(0,d.useEffect)(()=>{(0,o.A)("AlreadyPinnedCheck","/app/www/save/pin-to-board/PinPane/AlreadyPinnedCheck.tsx")},[]);let t=(0,_.A)(),i=(0,u.A)(v,e),a="GraphQL"===(0,m.z)(e),s=(0,g.A)({strategy:a?"GraphQL":"Legacy",query:P,variables:{pinId:i.entityId},options:{fetchPolicy:"network-only"},useGetLegacyResource:({pinId:e})=>(0,b.A)({name:"ApiResource",options:{url:`/v3/pins/${e}/`,field_sets:["pin.board()","pin.id","pin.pinned_to_board()","pin.type","pin.via_pinner()"]},noCache:!0})}),n=s?.v3GetPinQuery?.__typename==="V3GetPin"?s.v3GetPinQuery.data:null,r=(0,u.A)(x,n);return r&&r.pinnedToBoard&&"quick_creates"!==r.pinnedToBoard.layout?(0,y.jsxs)(c.az,{children:[(0,y.jsx)(c.az,{color:"error","data-test-id":"already-pinned",display:"flex",padding:3,rounding:200,width:185,children:(0,y.jsx)(c.KJ,{align:"center",color:"inverse",size:"200",weight:"bold",children:(0,f.vQ)(t._('Psst! You already saved this Pin to {{ board_name }} ', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:(r.pinnedToBoard||{}).name}).join(" ")})}),(0,y.jsx)(c.az,{display:"flex",justifyContent:"center",marginTop:-3,children:(0,y.jsx)(c.In,{accessibilityLabel:"",color:"error",icon:"heart-fill",size:26})})]}):null}var A=i(375502);function w(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let j=(void 0!==r||(r=i(233746)).hash&&"ee852d86e422f64afda32d5c5ed05eeb"!==r.hash&&console.error("The definition of 'PinPane_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),k=(void 0!==l||(l=i(978663)).hash&&"1a4583782792fbfe92015cb2dbe50f70"!==l.hash&&console.error("The definition of 'PinPane_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);class z extends d.Component{constructor(...e){super(...e),w(this,"state",{flyoutCursorIndex:-1,description:this.props.pin?.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),w(this,"updateDescription",e=>{this.props.updateDescription&&this.props.updateDescription(e)}),w(this,"handleHashtagAddition",e=>{let{pin:t}=this.props;this.props.logContextEvent({event_type:101,component:208,element:10249,object_id_str:t?.entityId,aux_data:{hashtags:e}});let i=this.state.flyoutCursorIndex,a=Number(i+this.state.hashtagQuery.length),s=this.state.description.slice(0,i)+e+" "+this.state.description.slice(a);this.updateDescription(s),this.setState({description:s,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})})}render(){let{color:e,isFirstPin:t,pin:i,pinImageRef:a,shuffleAsset:s}=this.props,{editing:n,flyoutOpened:r,hashtagQuery:l,isHashtagFlyoutOpen:o}=this.state,d=s?.cutoutImages??i?.images_236x,h=d?.url||i?.imageBase64||this.props.urlPinInfo?.imageUrl,u=this.state.description||this.props.urlPinInfo?.description||"",m=i?.link||this.props.urlPinInfo?.link;return(0,y.jsxs)(c.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:r&&n?{transform:"translateY(-75px)"}:{}},display:"flex",justifyContent:"center",position:"relative",width:t?"50%":"",children:[(0,y.jsxs)(c.so,{alignItems:"center",direction:"column",justifyContent:"start",children:[i?.entityId&&!s&&(0,y.jsx)(S,{pinKey:i}),(0,y.jsx)(c.az,{paddingY:9*!!t,width:240,children:(0,y.jsx)(c.az,{ref:a,maxHeight:r&&n?220:335,overflow:"hidden",rounding:400,children:h?(0,y.jsx)(c._V,{alt:u,naturalHeight:d?.height||1,naturalWidth:d?.width||1,src:h}):!!m&&(0,y.jsx)(p.A,{color:e||"",description:u,url:m})})})]}),this.anchor&&o?(0,y.jsx)(A.A,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,query:l}):null]})}}function C({pinKey:e,shuffleAssetKey:t,...i}){(0,d.useEffect)(()=>{(0,o.A)("PinPane","/app/www/save/pin-to-board/PinPane/PinPane.tsx")},[]);let{logContextEvent:a}=(0,h.o)(),s=(0,u.A)(j,e),n=(0,u.A)(k,t);return(0,y.jsx)(z,{...i,logContextEvent:a,pin:s,shuffleAsset:n})}},792047(e,t,i){i.d(t,{a:()=>N});var a,s,n=i(61163),r=i(859471),l=i(106386);i(825193);var o=i(979638),d=i(427471),c=i(243439),h=i(586733),u=i(900303),p=i(296221),m=i(250325),g=i(567176),_=i(693154),f=i(535273),b=i(662449),y=i(538329),v=i(74806),x=i(706466),P=i(987055),S=i(961403),A=i(310065),w=i(48180),j=i(878913),k=i(204398),z=i(96897),C=i(974694),I=i(19821),T=i(542975),B=i(570805),R=i(562615),F=i(96740);function K(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let E=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>â€¦)]+/gi,L=(void 0!==a||(a=i(82118)).hash&&"64132b88edd48497e63c9ad85ae5ab66"!==a.hash&&console.error("The definition of 'PinSaveRequest_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),M=(void 0!==s||(s=i(842227)).hash&&"58c24e25a76e7a1c4533f3b07f490517"!==s.hash&&console.error("The definition of 'PinSaveRequest_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);class D extends r.Component{constructor(...e){super(...e),K(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.getModalTitle(this.props.showCreate,!!this.props.boardWithSection),pinDescription:this.props.pin&&this.props.pin.description||this.props.urlPinInfo?.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),K(this,"unmounted",!1),K(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),K(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),K(this,"close",()=>{let{onClose:e}=this.props;e&&e(),this.props.logContextEvent({event_type:2502,component:5,element:610})}),K(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),K(this,"getPinResource",(e,t,i)=>{let{color:a,clientTrackingParams:s,currentHistoryStack:n,pin:r,method:l,guid:o,additionalCreateFields:h,advertiser_id:u,urlPinInfo:p,shuffleAsset:m,viewerUserId:g}=this.props,_=r?.entityId?"RepinResource":"PinResource",f=r?.imageUrl||p?.imageUrl,b=r?.link||p?.link,y=!r?.entityId&&f?(0,P.A)(f,b):r?.images_orig?.url||"",{trafficSource:v}=(0,c.A)(n??[],!!g),x={...h,board_id:t||"",color:a||"",clientTrackingParams:(0,w.A)(s,r?.trackingParams),description:this.state.pinDescription,guid:o||"",link:b,image_base64:r?.imageBase64??void 0,image_url:y,is_buyable_pin:!1,is_removable:r?.promotedIsRemovable??void 0,media_upload_id:r?.mediaUploadId??void 0,method:l||"",pin_id:r?.entityId||"",section:i,title:r?.title||"",aux_data:{source:v},...u?{advertiser_id:u}:Object.freeze({}),...m?{shuffle_asset:m.entityId}:{}};if(!e){let{facebook:e,twitter:t}=this.state.sharing;x.share_facebook=e,x.share_twitter=t}return d.A.create(_,x)}),K(this,"triggerPubSubs",e=>{this.props.onPinCreate&&this.props.onPinCreate({boardId:e.board.id,pinId:e.id})}),K(this,"makeCancelablePromise",e=>{let t=!1;return{promise:new Promise((i,a)=>{e.then(e=>t?a({isCanceled:!0}):i(e)),e.catch(e=>t?a({isCanceled:!0}):a(e))}),cancel(){t=!0}}}),K(this,"handleLogToastClick",()=>{this.props.logContextEvent({event_type:101,component:20,view_type:52})}),K(this,"showBoardSavedToast",(e,t)=>{let{toastManagerContext:i,i18n:a}=this.props;i.showToast(({hideToast:i})=>{var s;return(0,R.jsx)(g.A,{duration:4e3,href:t?`${e.url??""}${t.slug??""}`:e.url,imageUrl:e.image_cover_url??"",onClick:this.handleLogToastClick,onHide:i,text:(s=e.name,t?(0,B.A)(a._('Saved to {{sectionName}} in {{boardName}}', 'Toast for successfully saving to a section within a board', 'Toast for successfully saving to a section within a board'),{sectionName:t.title??"",boardName:s??""}):(0,R.jsx)(I.KJ,{children:(0,T.$w)({text:a._('Saved to <strong id="1">{{ boardName }}</strong>', 'PinToBoard.Lib.SavedToBoardToast.Message', 'Saved to label for better save. boardName: url to saved board'),markers:{boardName:s??""},jsxReplacements:{1:({innerHtmlStrings:e})=>(0,R.jsx)(I.KJ,{weight:"bold",children:e})}})}))})})}),K(this,"dismissModal",()=>{let{resolve:e,newPin:t}=this.state;e&&e(t)}),K(this,"handleBoardSaveSuccess",(e,t,i,a)=>{let{action:s,saveToBoard:n,dispatch:r,pin:l,setCompletionPromise:o,shouldShowToast:d,showRepinAnimation:c,viewerUserId:h,urlPinInfo:u}=this.props;r((0,m.$O)());let p=e.resource_response.data,g=this.makeCancelablePromise(new Promise(e=>{this.triggerPubSubs(p);let s=this.state.pinDescription.match(E)||[];s.length>0&&this.props.logContextEvent({event_type:2,element:10273,object_id_str:this.props.pin?.entityId,aux_data:{hashtags:JSON.stringify(s)}});let n=()=>{d&&this.showBoardSavedToast(t,i),this.safeSetState({displaySuccessAnimation:!0,modalTitle:this.props.i18n._('Board created', 'Modal title after creating a new board', 'Modal title after creating a new board'),newPin:p,resolve:e})};a?n():e(p)}));!a&&l?.entityId&&c(l.entityId),o(g),n(t),r((0,k.zY)({boardId:t.id,sectionId:i&&i.id,increment:1})),h&&(r((0,C.LR)({userId:h,increment:1})),r((0,m.$O)())),(i||!t.image_cover_url)&&(t.image_cover_url=l?.imageUrl||u?.imageUrl||l?.images_236x?.url||"",r((0,k.NQ)(t))),i&&r((0,v.Jt)("BoardSectionResource",{options:{field_set_key:"board_page",section_id:i.id}})),l?.entityId&&r((0,z.J4)({id:l.entityId,nodeId:l.__id,boardId:t.id,title:t.name??"",url:t.url??"",localPinId:p.id}))}),K(this,"handleSaveToBoard",(e,t,i)=>{let{onToggleModal:a,shouldShowToast:s,mountAfterActionPlacement:n}=this.props;s&&!i&&(this.close(),this.showBoardSavedToast(e,t));let r="secret"===(e.privacy||""),l={board:t?t.id:e.id,state:F.J.LOADING};this.safeSetState({boardSavedTo:l},()=>{this.getPinResource(r,e.id,(t||{}).id).callCreate({showError:!1}).then(s=>{n("Save",{pin_id:this.props.pin?.entityId,is_promoted:this.props.pin?.isPromoted}),this.safeSetState({boardSavedTo:Object.assign(l,{state:F.J.SUCCESS})},()=>this.handleBoardSaveSuccess(s,e,t,i)),a&&!i&&a(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),u.A.showError(e.message_detail||e.message);let t=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(t),a&&a(!1)})})}),K(this,"handleNewBoardAnimationCompletion",()=>{let{pin:e,showRepinAnimation:t}=this.props;e?.entityId&&t(e.entityId)})}getModalTitle(e,t){if(e)if(t)return this.props.i18n._('Create section', 'modal title for create section pane', 'modal title for create section pane');else return this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board');return t?this.props.i18n._('Choose section', 'modal title for choose section', 'modal title for choose section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board')}componentDidUpdate(e){let{boardWithSection:t,showCreate:i,pin:a,urlPinInfo:s,description:n}=this.props,r={};(a!==e.pin||s!==e.urlPinInfo||n!==e.description)&&(r.pinDescription=a?.description||s?.description||n||""),(i!==e.showCreate||t!==e.boardWithSection)&&(r.modalTitle=this.getModalTitle(i,!!t)),Object.keys(r).length>0&&this.safeSetState(r)}componentWillUnmount(){this.unmounted=!0}render(){let{close:e,dismissModal:t,handleNewBoardAnimationCompletion:i,handleSaveToBoard:a,setModalTitle:s,updateDescription:n}=this,{boardSavedTo:r,displaySuccessAnimation:l,modalTitle:o,newPin:d}=this.state,{color:c}=this.props;return this.props.children({boardSavedTo:r,color:c,dismissModal:t,displaySuccessAnimation:l,handleAbort:e,handleNewBoardAnimationCompletion:i,handleSaveToBoard:a,modalTitle:o,newPin:d,setModalTitle:s,updateDescription:n})}componentDidMount(){(0,n.A)("PinSaveRequest","/app/www/save/pin-to-board/PinSaveRequest.tsx")}}function N({pinKey:e,shuffleAssetKey:t,...i}){(0,r.useEffect)(()=>{(0,n.A)("PinSaveRequest","/app/www/save/pin-to-board/PinSaveRequest.tsx")},[]);let{saveToBoard:a}=(0,A.p)(),{logContextEvent:s}=(0,h.o)(),d=(0,j.y)()?.onPinCreate,c=(0,y.A)(),u=(0,o.zy)(),m=(0,_.A)(),g=(0,x.CG)(),v=(0,l.wA)(),{updateHeaderState:P}=(0,S.A)(),w=(0,l.d4)(({advertiser:e})=>m.isAuth&&e&&e.owner_user_id!==m.id?e.id:void 0),{previous:k}=(0,b.qD)(),z=(0,p.Ts)(),C=(0,b.V)(),I=(0,f.A)(L,e),T=(0,f.A)(M,t);return(0,R.jsx)(D,{...i,advertiser_id:w,currentHistoryStack:C,dispatch:v,i18n:c,location:u,logContextEvent:s,mountAfterActionPlacement:z,onPinCreate:d,pin:I,previousHistory:k,saveToBoard:a,showRepinAnimation:e=>P({type:"showRepinAnimation",payload:e}),shuffleAsset:T,toastManagerContext:g,viewerUserId:m.isAuth?m.id:void 0})}},476257(e,t,i){let a;i.d(t,{A:()=>er});var s,n,r,l,o=i(859471);i(825193);var d=i(19821),c=i(79906),h=i(693154),u=i(535273),p=i(538329),m=i(592023),g=i(916455),_=i(61163),f=i(106386),b=i(743372),y=i(844255),v=i(94565),x=i(562615);let P=({board:e,completeCreateSectionAction:t,height:i,onClose:a,pinImport:s,url:n,width:r})=>{(0,o.useEffect)(()=>{(0,_.A)("SectionCreateModal","/app/www/save/board/BoardPage/ModalContents/SectionCreateModal.tsx")},[]);let l=(0,p.A)(),{isRTL:h}=(0,y._8)(),u=(0,b.A)(),m=(0,f.wA)(),[g,P]=(0,o.useState)(""),[S,A]=(0,o.useState)(!1),[w,j]=(0,o.useState)(null);return(0,x.jsx)(c.Ay,{accessibilityModalLabel:l._('Repin modal', 'save.pinToBoard.modal.label', 'Accessibility label on modal'),footer:(0,x.jsx)(d.so,{children:(0,x.jsx)(d.az,{marginStart:"auto",children:(0,x.jsx)(d.$n,{color:"primary",dataTestId:"create-section-add-button",disabled:S||!g.trim()||!!w,fullWidth:!0,onClick:()=>{e&&(A(!0),m((0,v.A)({boardId:e.id,name:g.trim(),pinImport:s},l,void 0,u)).then(i=>{t(e,i,!1)}).catch(e=>{j(e.message_detail||e.message)}).finally(()=>{A(!1)}))},size:"lg",text:l._('Add', 'sectionCreateModal.add.button', 'add a new section')})})}),heading:(0,x.jsx)(d.az,{paddingY:8,children:(0,x.jsxs)(d.so,{justifyContent:"center",children:[(0,x.jsx)(d.az,{maxWidth:400,children:(0,x.jsx)(d._Y,{align:"center",size:"600",children:l._('Add section', 'sectionCreateModal.title', 'Title in the add section modal')})}),(0,x.jsx)(d.az,{left:h,padding:8,position:"absolute",right:!h,top:!0,children:(0,x.jsx)(d.K0,{accessibilityLabel:l._('Close', 'sectionCreateModal.closeButton', 'close section create modal button'),icon:"close",iconColor:"default",onClick:a,size:"md"})})]})}),onDismiss:a,size:"sm",children:(0,x.jsx)(d.az,{padding:8,children:(0,x.jsxs)(d.so,{children:[(0,x.jsx)(d.n1,{height:i,rounding:400,width:r,children:n&&(0,x.jsx)(d._V,{alt:"",fit:"cover",naturalHeight:i??1,naturalWidth:r??1,src:n})}),(0,x.jsx)(d.az,{dangerouslySetInlineStyle:{__style:{width:r?`calc(100% - ${r}px)`:"100%"}},marginStart:8,children:(0,x.jsx)(d.A_,{dataTestId:"create-section-name-input-field",errorMessage:w,id:"sectionEditName",label:l._('Name', 'section.create.label', 'label text for section input'),onChange:e=>{P(e.value),j(null)},placeholder:l._('Like "Lighting"', 'sectionCreateModal.boardSection.name', 'Placeholder for board section name'),size:"lg",type:"text",value:g})})]})})})};var S=i(586733),A=i(703672),w=i(430705),j=i(655621),k=i(971289);function z(e,t,i,s){return{...e?{pin_id:e}:Object.freeze({}),...t?{username:t}:Object.freeze({}),...i?{advertiser_id:i,filter:"protected"}:Object.freeze({}),field_set_key:"board_picker",limit:a,shortlist_suggestions:2,isDesktop:s}}var C=i(949141),I=i(851287);let T=(void 0!==s||(s=i(376901)).hash&&"76215b7b40cb02e76b77e58c8765d0d1"!==s.hash&&console.error("The definition of 'BoardPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);class B extends o.Component{constructor(...e){var t,i,a;super(...e),t="getSections",i=e=>{let t,i,{boardResource:{data:a}}=this.props;if(!a)return[];let{all_boards:s,boards_shortlist:n}=a,r=(t=[],i=[],s.forEach(e=>{e.name?.match(/^\d/)?i.push(e):t.push(e)}),[...t,...i]);return r.length<=3?[{items:r}]:e.length>=j.A?[{items:(0,I._)(r,e)}]:[n.length?{items:n,title:this.props.i18n._('Top choices', ' - ', ' -- ')}:{items:[]},{items:r,title:this.props.i18n._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')}]},(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{boardResource:{data:e,error:t,isLoaded:i},boardSavedTo:a,isRepin:s,isSelectMode:n,onBoardCreate:r,onBoardSelected:l,pin:o}=this.props,d=i&&!!e&&e.all_boards.length<=3;return(0,x.jsx)(C.A,{boardSavedTo:a,getSections:this.getSections,hasLoadError:!!t,hasLowBoardCount:d,isLoaded:i,isRepin:s,isSelectMode:n,onCreate:r,onSelected:l,pinId:o?.entityId})}componentDidMount(){(0,_.A)("BoardPicker","/app/www/RepinPicker/BoardPicker/BoardPicker.tsx")}}function R({pinKey:e,...t}){(0,o.useEffect)(()=>{(0,_.A)("BoardPicker","/app/www/RepinPicker/BoardPicker/BoardPicker.tsx")},[]);let i=(0,p.A)(),a=(0,h.A)(),s=(0,k.qJ)(),n=(0,u.A)(T,e),r=(0,f.d4)(({advertiser:e})=>{if(a.isAuth&&e&&e.owner_user_id!==a.id)return e.id}),l=(0,f.d4)(({advertiser:e})=>{if(a.isAuth&&e&&e.owner_user_id!==a.id)return e.owner_user_id}),d=(0,w.A)({name:"BoardPickerBoardsResource",options:z(n?.entityId,l,r,s)});return(0,x.jsx)(B,{...t,boardResource:d,i18n:i,pin:n})}class F extends o.Component{constructor(...e){var t,i,a;super(...e),t="getSections",i=e=>{let{board:t,i18n:i,sectionsResource:{data:a}}=this.props,s=i._('Board', 'PinSaveButton.RepinPicker.SectionListBoardTitle', 'board title on section picker'),n=i._('Section', 'PinSaveButton.BoardFlyout.SectionListSectionTitle', 'section title on section picker');return e.length>=j.A?[{items:(0,I._)([t],e),customProps:{inSectionSelection:!0}},{items:(0,I._)(a??[],e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0},title:s},{items:a??[],title:n}]},(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{sectionsResource:{error:e,isLoaded:t},boardSavedTo:i,isRepin:a,isSelectMode:s,onSectionCreate:n,onSectionSelected:r,pinId:l}=this.props;return(0,x.jsx)(C.A,{boardSavedTo:i,createButtonLabel:this.props.i18n._('Add section', 'Button for creating a board section', 'Button for creating a board section'),getSections:this.getSections,hasLoadError:!!e,isLoaded:t,isRepin:a,isSelectMode:s,onCreate:n,onSelected:r,pinId:l})}componentDidMount(){(0,_.A)("SectionPicker","/app/www/RepinPicker/SectionPicker.tsx")}}function K(e){(0,o.useEffect)(()=>{(0,_.A)("SectionPicker","/app/www/RepinPicker/SectionPicker.tsx")},[]);let t=(0,p.A)(),i=(0,w.A)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id}});return(0,x.jsx)(F,{...e,i18n:t,sectionsResource:i})}var E=i(753771),L=i(500544),M=i(912581),D=i(989457),N=i(570805);function O(e){let t=(0,p.A)(),{body:i,img:a,onClick:s,selected:n,title:r,username:l,valid:o}=e;return(0,x.jsx)(d.az,{marginBottom:4,children:(0,x.jsx)(d.Rp,{onTap:s,children:(0,x.jsxs)(d.so,{alignItems:"center",direction:"row",justifyContent:"start",width:"100%",children:[a,(0,x.jsxs)(d.az,{flex:"grow",marginEnd:2,marginStart:3,children:[(0,x.jsx)(d.az,{marginBottom:1,children:(0,x.jsx)(d.KJ,{lineClamp:1,weight:"bold",children:r})}),(0,x.jsx)(d.KJ,{lineClamp:1,size:"100",children:l||i})]}),(0,x.jsx)(d.az,{marginStart:2,children:l?n?(0,x.jsx)(d.In,{accessibilityLabel:t._('Confirmation an invite will be sent', 'Alt tags on a check box on the board create flow for board invites', 'Alt tags on a check box on the board create flow for board invites'),color:"error",icon:"circle-check",size:32}):(0,x.jsx)(d.az,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):(0,x.jsx)(d.$n,{color:"secondary",disabled:!!n||!o,size:"sm",text:n?t._('Sent', 'Sent a board collaborator invite', 'Sent a board collaborator invite'):t._('Invite', 'Add board collaborator invite', 'Add board collaborator invite')})})]})})})}var H=i(955170);function U(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Q(e,t,i){let{id:a}=e;return t===i.findIndex(e=>e.id===a)}class W extends o.Component{constructor(...e){super(...e),U(this,"state",{selectedCollaborators:this.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),U(this,"isIdSelected",{}),U(this,"handleTextFieldChange",({value:e})=>{this.setState({value:e})}),U(this,"handleCollaboratorClick",e=>{let{id:t,type:i}=e;this.isIdSelected[t]=!this.isIdSelected[t];let{inviteUsers:a,inviteEmails:s}=this.props,{selectedCollaborators:n}=this.state,r=n.concat([e]);this.props.onSelectedCollaboratorsChange({id:t,resource:"email"===i?s:a}),this.setState({selectedCollaborators:r})}),U(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})})}componentDidMount(){let{inviteUsers:e,inviteEmails:t}=this.props;this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map(i=>{let{id:a,type:s}=i;return this.isIdSelected[a]=!this.isIdSelected[a],this.props.onSelectedCollaboratorsChange({id:a,resource:"email"===s?t:e}),null})}render(){let{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,i=t||[],a=(""===e?this.state.selectedCollaborators.concat(i).filter(Q):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:(0,M.A)(e)}).concat(i).filter(Q)).map(e=>(function(e,t,i,a){if("user_share_suggestion"===e.type||"user"===e.type){let a=(0,x.jsx)(D.eu,{accessibilityLabel:"",name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return(0,x.jsx)(O,{img:a,onClick:()=>i(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){let s,n,{id:r,valid:l}=e,o=(0,x.jsx)(d.az,{alignItems:"center",color:"secondary",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:(0,x.jsx)(d.In,{accessibilityLabel:a._('Email icon', 'Email icon on board create modal', 'Email icon on board create modal'),color:"default",icon:"envelope",size:20})}),c=(0,N.A)(a._('Email {{ email }}', ' - ', ' -- '),{email:r});return t?(s=a._('Done!', 'Text that lets the user know we sent the board invite email', 'Text that lets the user know we sent the board invite email'),n=()=>void 0):(s=l?a._('Click to send!', 'Text that lets the user know they can successfully send a board invite email', 'Text that lets the user know they can successfully send a board invite email'):a._('Keep typing!', 'Text that lets a user know the email they are typing is not valid yet', 'Text that lets a user know the email they are typing is not valid yet'),n=()=>l?i(e):void 0),(0,x.jsx)(O,{body:s,img:o,onClick:n,selected:t,title:c,valid:l})}})(e,this.isIdSelected[e.id],this.handleCollaboratorClick,this.props.i18n)).map((e,t)=>(0,x.jsx)("li",{children:e},t));return(0,x.jsxs)(d.so,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,x.jsx)(d.az,{paddingX:3,paddingY:2,children:(0,x.jsx)(d.KJ,{size:"100",children:this.props.i18n._('Add collaborators (optional)', 'Optional field to add collaborators to a board on board create', 'Optional field to add collaborators to a board on board create')})}),(0,x.jsx)(d.az,{marginBottom:4,marginTop:2,paddingX:3,width:"100%",children:(0,x.jsx)(d.az,{flex:"grow",children:(0,x.jsx)(L.A,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:(0,x.jsx)(d.Lw,{accessibilityLabel:this.props.i18n._('Search for collaborators by name or email', ' - ', ' -- '),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:this.props.i18n._('Search by name or email', ' - ', ' -- '),size:"lg",value:e})})})}),(0,x.jsx)(d.az,{marginBottom:14,overflow:"auto",paddingX:3,children:(0,x.jsx)("ul",{children:a})})]})}}function J(e){(0,o.useEffect)(()=>{(0,_.A)("BoardCreateCollaborators","/app/www/BoardCreate/BoardCreateCollaborators.tsx")},[]);let t=(0,p.A)(),i=(0,w.A)({name:"ShareSuggestionsResource",noCache:!0}),a=(0,H.mV)(),s=(0,H.lt)();return(0,x.jsx)(W,{...e,i18n:t,inviteEmails:a,inviteUsers:s,shareSuggestionsResource:i})}var q=i(896575),Y=i(433414);function $({onCancel:e,onCreate:t,onInvite:i,prefilledName:a,preselectedCollaborators:s,showTitle:n}){(0,o.useEffect)(()=>{(0,_.A)("CreateBoardPane","/app/www/save/pin-to-board/CreateBoardPane/CreateBoardPane.tsx")},[]);let r=(0,p.A)(),{isRTL:l}=(0,y._8)(),{handleCreate:c,handleChangeName:h,handleChangePrivacy:u,isAdAccountOwner:m,state:{createBoardError:g,inputName:f,nameValidatorErrors:b,privacy:v,saving:P}}=(0,Y.A)({onCreate:t,prefilledName:a}),S=0===b.length,A=v===E.A.BoardPrivacy.SECRET,w=(0,x.jsxs)(o.Fragment,{children:[(0,x.jsx)(d.so,{children:(0,x.jsx)(d.$n,{onClick:e,text:r._('Cancel', 'cancel board create', 'cancel board create')})}),(0,x.jsxs)(d.so,{alignItems:"stretch",justifyContent:"end",children:[!!g&&(0,x.jsx)(d.az,{paddingX:2,children:(0,x.jsx)(d.KJ,{align:"center",color:"error",size:"200",weight:"bold",children:g})}),(0,x.jsx)(q.A,{disabled:!f.trim()||!S||!!g||P,submitting:P,text:r._('Create', 'create a new board', 'create a new board')})]})]});return(0,x.jsx)(d.az,{color:"default",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:(0,x.jsx)("form",{onSubmit:e=>{e.preventDefault(),c()},style:{height:"100%"},children:(0,x.jsxs)(d.so,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[n&&(0,x.jsx)(d.az,{display:"flex",marginTop:3,paddingX:6,paddingY:3,children:(0,x.jsx)(d._Y,{size:"400",children:r._('Create board', ' - ', ' -- ')})}),(0,x.jsxs)(d.az,{padding:3,children:[(0,x.jsx)(d.az,{marginBottom:2,children:(0,x.jsx)(d.JU,{htmlFor:"boardEditName",children:(0,x.jsx)(d.KJ,{size:"100",children:r._('Name', ' - ', ' -- ')})})}),(0,x.jsx)(d.az,{children:(0,x.jsx)(d.A_,{errorMessage:b.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>h(e),placeholder:r._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:f})})]}),m&&(0,x.jsxs)(o.Fragment,{children:[(0,x.jsxs)(d.az,{padding:3,children:[(0,x.jsx)(d.az,{marginBottom:2,children:(0,x.jsx)(d.JU,{htmlFor:"secret",children:(0,x.jsx)(d.KJ,{size:"100",children:r._('Secret', 'secret board', 'secret board')})})}),(0,x.jsx)(d.az,{children:(0,x.jsx)(d.dO,{id:"secret",onChange:u,switched:A})})]}),(0,x.jsx)(d.so,{alignItems:"stretch",flex:"grow",justifyContent:"start",overflow:"hidden",children:(0,x.jsx)(d.az,{width:"100%",children:(0,x.jsx)(J,{onSelectedCollaboratorsChange:i,preselectedCollaborators:s})})})]}),!m&&(0,x.jsx)(o.Fragment,{children:(0,x.jsxs)(d.az,{padding:3,children:[(0,x.jsx)(d.az,{marginBottom:2,children:(0,x.jsx)(d.JU,{htmlFor:"protected",children:(0,x.jsx)(d.KJ,{size:"100",children:r._('Protected board (not listed on user\'s profile)', 'protected board', 'protected board')})})}),(0,x.jsx)(d.az,{children:(0,x.jsx)(d.dO,{disabled:!0,id:"protected",onChange:()=>void 0,switched:!0})})]})}),(0,x.jsx)(d.az,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px"}},"data-test-id":"create-board-footer-default",display:"flex",elevation:"shadowFloating",justifyContent:"between",left:l,paddingX:4,paddingY:2,position:"absolute",right:!l,width:720,children:w})]})})})}var V=i(952756);function X(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let G=(void 0!==n||(n=i(399342)).hash&&"56f620fbd63abf8f7cb32f9a378198f8"!==n.hash&&console.error("The definition of 'BoardsPane_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class Z extends o.Component{constructor(...e){super(...e),X(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),X(this,"close",()=>{let{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:i}=this.props;t&&e?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):i()}),X(this,"sendInvites",e=>{let{inviteQueue:t}=this.state;Object.keys(t).forEach(i=>{t[i].resource(e.id??"",[i])})}),X(this,"handleInvite",e=>{let{inviteQueue:t}=this.state;if(t[e.id]){let i={...t};delete i[e.id],this.setState({inviteQueue:i})}else{let i={...t,[e.id]:e};this.setState({inviteQueue:i})}}),X(this,"handleBoardCreate",e=>{let{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)}),X(this,"handleBoardSave",(e,t)=>{let{selectedSectionBoard:i}=this.state,{onBoardSave:a,invalidatePinBetterSaveResource:s,invalidateResource:n}=this.props,r="board_section"===e.type;if(n(),s(),i&&("boardsection"===e.type||r))return a(i,e,t);let{section_count:l=0}=e;!i&&"number"==typeof l&&l>0?this.setState({selectedSectionBoard:e},this.manageModalTitle):(this.sendInvites(e),a(e,void 0,t))}),X(this,"handleCreate",e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle),this.props.logContextEvent({event_type:101,component:e?13105:13025,element:e?10306:249})}),X(this,"manageModalTitle",()=>{let{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:i}=this.state;e&&e(i&&t?this.props.i18n._('Add section', 'Repin title for making a board section', 'Repin title for making a board section'):i&&!t?this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board'):t&&!i?this.props.i18n._('Choose section', 'Repin title for choosing a board section', 'Repin title for choosing a board section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board'))})}render(){let{boardSavedTo:e,isRepin:t,isSelectMode:i,pin:a,preselectedCollaborators:s,setModalTitle:n,suggestedBoardTitle:r}=this.props,{newName:l,selectedSectionBoard:o,showCreate:c}=this.state,h=!!o,u=!n;return(0,x.jsxs)(d.az,{display:"flex",position:"relative",width:"100%",children:[!c&&(0,x.jsx)(d.az,{direction:"column",display:"flex",marginTop:4,width:"100%",children:o?(0,x.jsx)(K,{board:o,boardSavedTo:e,isRepin:t,isSelectMode:i,onSectionCreate:this.handleCreate(h),onSectionSelected:this.handleBoardSave}):(0,x.jsx)(R,{boardSavedTo:e,isRepin:t,isSelectMode:i,onBoardCreate:this.handleCreate(h),onBoardSelected:this.handleBoardSave,pinKey:a})}),c&&!o&&(0,x.jsx)($,{onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,prefilledName:l||r,preselectedCollaborators:s,showTitle:u}),c&&o&&(0,x.jsx)(V.A,{board:o,completeCreateSectionAction:this.handleBoardSave,initialName:l,isRepin:t,onClearModal:this.close,showTitle:u})]})}componentDidMount(){(0,_.A)("BoardsPane","/app/www/save/pin-to-board/BoardsPane/BoardsPane.tsx")}}function ee({pinKey:e,...t}){(0,o.useEffect)(()=>{(0,_.A)("BoardsPane","/app/www/save/pin-to-board/BoardsPane/BoardsPane.tsx")},[]);let{logContextEvent:i}=(0,S.o)(),a=(0,p.A)(),s=(0,u.A)(G,e),n=(0,f.wA)();return(0,x.jsx)(Z,{...t,i18n:a,invalidatePinBetterSaveResource:()=>{n((0,A.Q5)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},invalidateResource:()=>{n((0,A.Q5)("BoardPickerBoardsResource",z(s?.entityId)))},logContextEvent:i,pin:s})}var et=i(785657);function ei(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let ea=(void 0!==r||(r=i(414227)).hash&&"dab58396c0cc99aa60f3fd6bc5d0ebe5"!==r.hash&&console.error("The definition of 'PinToBoard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),es=(void 0!==l||(l=i(433282)).hash&&"4435ca5e135b834ea8a6425f68eb2f7a"!==l.hash&&console.error("The definition of 'PinToBoard_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);class en extends o.PureComponent{constructor(...e){super(...e),ei(this,"pinImageRef",(0,o.createRef)()),ei(this,"handleSavePinToBoard",(e,t,i)=>{let{handleSaveToBoard:a}=this.props;a(e,t,i)}),ei(this,"close",()=>{let{handleAbort:e}=this.props;e()}),ei(this,"dismissModal",()=>{let{dismissModal:e}=this.props;e&&e()})}render(){let{boardSavedTo:e,boardWithSection:t,color:i,displaySuccessAnimation:a,handleNewBoardAnimationCompletion:s,isInModal:n,newPin:r,pin:l,preselectedCollaborators:h,onBoardCreated:u,sensitiveContentNotice:p,setModalTitle:_,showCreate:f,shouldRenderContent:b,suggestedBoardTitle:y,updateDescription:v,urlPinInfo:S,shuffleAsset:A}=this.props,w=S?.description||S?.link||S?.imageUrl;if(!l&&!w||!b)return null;if(f&&t)return(0,x.jsx)(P,{board:t,completeCreateSectionAction:this.handleSavePinToBoard,height:l?.images_236x?.height??0,onClose:this.close,url:l?.images_236x?.url??S?.imageUrl??"",width:l?.images_236x?.width??0});let j=null;r&&r.board&&(j=r.board.name);let k=p&&p.title||this.props.modalTitle,z=p?(0,x.jsx)(m.A,{inModal:!0,notices:[p]}):(0,x.jsx)(d.so,{alignItems:"stretch",dataTestId:"pin-to-board-content",height:"calc(90vh - 97px)",justifyContent:"center",maxHeight:"703px",width:"100%",children:(0,x.jsxs)(o.Fragment,{children:[(0,x.jsxs)(d.az,{color:"default",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:200,width:"100%",children:[(0,x.jsx)(d.so,{alignItems:"stretch",direction:"column",justifyContent:"between",width:"40%",children:(0,x.jsx)(d.az,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3,children:(0,x.jsx)(et.A,{color:i,pinImageRef:this.pinImageRef,pinKey:l,shuffleAssetKey:A??null,updateDescription:v,urlPinInfo:S})})}),(0,x.jsx)(d.so,{alignItems:"stretch",width:"60%",children:(0,x.jsx)(ee,{boardSavedTo:e,boardWithSection:t,isRepin:!0,onBoardCreated:u,onBoardSave:this.handleSavePinToBoard,onClose:this.close,pinKey:l,preselectedCollaborators:h,setModalTitle:n?_:void 0,showCreate:f,suggestedBoardTitle:y})})]}),a&&(0,x.jsx)(g.A,{onDismiss:()=>{s(),this.dismissModal()},pinImageRef:this.pinImageRef,pinKey:l,selectedBoardName:j,shuffleAssetKey:A??null})]})});if(!n)return z;let C=k||this.props.i18n._('Repin modal', 'save.pin-to-board.PinToBoard.PinToBoard', 'Accessibility label on modal');return(0,x.jsx)(c.Ay,{accessibilityModalLabel:C,heading:k,onDismiss:this.close,size:"md",children:z})}}ei(en,"defaultProps",{pwtAuxData:{}});let er=function({pinKey:e,shuffleAssetKey:t,...i}){let a=(0,p.A)(),s=(0,h.A)(),n=(0,u.A)(ea,e),r=(0,u.A)(es,t);return(0,x.jsx)(en,{...i,i18n:a,pin:n,shuffleAsset:r,viewer:s})}},96740(e,t,i){i.d(t,{J:()=>a});let a={LOADING:"loading",SUCCESS:"success"}},433414(e,t,i){i.d(t,{A:()=>m});var a=i(859471),s=i(106386),n=i(753771),r=i(457315),l=i(693154),o=i(538329),d=i(542975),c=i(703672),h=i(734696),u=i(394550),p=i(720407);function m({onCreate:e,prefilledName:t}){let i=(0,o.A)(),m=(0,s.d4)(({advertiser:e})=>e),g=(0,s.wA)(),_=(0,l.A)(),f=!m||_.isAuth&&m.owner_user_id===_.id,b=m&&m.id,y=(0,p.A)(),[v,x]=(0,a.useState)({createBoardError:null,inputName:t||"",nameValidatorErrors:[],privacy:f?n.A.BoardPrivacy.PUBLIC:n.A.BoardPrivacy.PROTECTED,saving:!1}),P=()=>{let{inputName:t,privacy:a}=v;x({...v,saving:!0,createBoardError:null}),y({boardCreateOptions:{name:t,privacy:a,...!f&&b?{advertiser_id:b}:Object.freeze({}),aux_data:{source:"board_picker"}}}).then(t=>{x({...v,saving:!1}),e(t)}).catch(e=>{let t=i._('Uh oh! Something went wrong.', ' - ', ' -- ');if("string"==typeof e)t=e;else{let i=(0,r.A)(e,"message");if(i){let a=(0,r.A)(e,"message_detail");t=a?`${i} ${a}`:i}}x({...v,saving:!1,createBoardError:t})}),g((0,c.Q5)("BoardsResource",(0,u.A)(_.isAuth?_.username:"",a===n.A.BoardPrivacy.SECRET)))};return{handleChangeName:(e,t)=>{x({...v,inputName:e,nameValidatorErrors:(0,h.Yl)([(0,h.mg)({message:i._('Don\'t forget to name your board!', ' - ', ' -- ')}),(0,h.RU)({max:n.A.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:(0,d.vQ)(i._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a user input is too long', 'Validation error when a user input is too long'),{maxLength:n.A.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],e),createBoardError:null}),t&&P()},handleChangePrivacy:()=>{x({...v,privacy:v.privacy===n.A.BoardPrivacy.SECRET?n.A.BoardPrivacy.PUBLIC:n.A.BoardPrivacy.SECRET})},handleCreate:P,isAdAccountOwner:f,state:v}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/43548-872493e7823cb382.mjs.map